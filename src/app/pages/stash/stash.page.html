<ion-content [fullscreen]="true">
  <page-header title="Stash" description="
    Discover innovative ways to maximize the potential of your idle assets on Solana. 
    Optimize your investments and make your funds work more efficiently for you.
    "></page-header>
  <ion-grid>
    <!-- @if(analyzeStage() === 0){
    <promo [@slideInLeave] (onStartAnalyze)="analyzeStage.set(1)" />
    }@else if(analyzeStage() === 1){
    <analyze (onStartAnalyze)="analyzeStage.set(2)" />
    }@else{
    <burnable-accounts class="gap data-set ion-margin-bottom" [@slideInEnter] />
    <empty-accounts class="gap data-set " [@slideInEnter] />
    <extractable-stake-accounts class="gap data-set  ion-margin-bottom" [@slideInEnter] />
  } -->

    <ion-row id="stat-wrapper" class="ion-justify-content-between">
      <ion-col id="net-worth" class="gap data-set" size="12" sizeXl="4.3">
        <div class="icon-wrapper ion-hide-lg-down">
          <ion-img src="assets/images/vault-icon.svg" />
        </div>
        <div class="stat-title">Total stash</div>
        <div class="stat-desc">


          {{stashTotalUsdValue() | currency}}

          <!-- @if (stat.desc === '') {
        <ion-skeleton-text [animated]="true" />
        } -->
        </div>
      </ion-col>
      <ion-col id="portfolio-breakdown" class="gap data-set" size="12" sizeXl="7.5">
        <app-portfolio-breakdown [assets]="assets" />
      </ion-col>

    </ion-row>

    <!-- <ion-row>
      <ion-col size="12" class="data-set ion-margin-bottom">
        <table-head label="Manage your Empty Account"
          desc="Select one or more account to close/burn and get your SOL back!"></table-head>
        <ion-row class="ion-align-items-center ">
  
  
          <div class="ion-margin-start ion-hide-lg-down"></div>
          <ion-col>
            <app-table-menu [menu]="tableMenuOptions" [currentTab]="tableMenuOptions[0]"
              (onSelectTab)="selectedTab.set($event)" />
          </ion-col>
  
          
          
          <ion-col sizeLg="auto">
            <ion-row class="ion-align-items-center">
 

                <div id="toggle-swap">
                  
                  <span >Swap to hubSOL</span><ion-toggle [tooltip]="toolTipTpl" mode="md"/>
                  
                  <ng-template #toolTipTpl>
                    
                    <div class="tool-tip">
                      <div style="text-transform: capitalize; display: flex;align-items: center;margin-block-end: 4px;font-weight: 600;color:var(--ion-color-dark);">
                        <span 
                        style="background-color: var(--ion-color-primary); width:12px;height: 12px;border-radius: 50%;margin-inline-end: 6px;"
                        >
                      </span> 
                      Wave fees</div>
                      <div class="tool-tip-desc">Swap your empty account balance to hubSOL and wave platform fees!</div>
                    </div>
                  </ng-template>
                </div>
                <ion-button class="ion-text-capitalize" >Extract all</ion-button>
     
              </ion-row>
            </ion-col>
            <div class="ion-margin-end ion-hide-lg-down"></div>
            
          </ion-row>
  
      </ion-col>
    </ion-row> -->
    <ion-row class="data-set">
      <ion-row class="gap table-head ion-align-items-center ion-justify-content-between">
        <ion-col size="8">
          <div id="head-line"><ion-label>Tokens</ion-label> <ion-chip color="primary">5</ion-chip></div>
          <ion-text>{{5 | currency}}</ion-text>
        </ion-col>
        <ion-col size="2.5">
          <div id="toggle-swap">
            <span>Swap to hubSOL</span><ion-toggle mode="md" />
          </div>
        </ion-col>
        <ion-col size="1.2">
          <ion-button [disabled]="true" class="ion-text-capitalize">Close all</ion-button>
        </ion-col>
      </ion-row>
      <app-mft (onEmitData)="selectedRows($event)" [tableRows]="100" [checkboxes]="true" [tableId]="'savings-table'" [tableColumns]="columns" [tableData]="tableData" />
    </ion-row>
  </ion-grid>

</ion-content>

<ng-template #tokenTpl let-row let-rowIndex="rowIndex" let-column="column">
  <div class="item">
    <div class="item-img-wrapper">
      <ion-img [src]="row.imgUrl || 'assets/images/unknown.svg'" alt="image" />
    </div>
    <div class="item-info">

      <div class="item-bold">{{row.symbol || 'unknown'}}</div>
      <div class="item-light">{{row.token }}</div>

    </div>
  </div>
</ng-template>

<ng-template #checkboxTpl let-row let-rowIndex="rowIndex" let-column="column">
  <div class="ion-text-center">
    <ion-checkbox/>
  </div>
</ng-template>

<ng-template #amountTpl let-row let-rowIndex="rowIndex" let-column="column">
  <div class="ion-text-left">
    {{row.balance | number: '1.0'}} {{row.symbol}}
  </div>
</ng-template>

<ng-template #valueTpl let-row let-rowIndex="rowIndex" let-column="column">
  <div class="ion-text-left">
    {{row.value | number: '1.0'}} {{row['extract-asset']}}
  </div>
  <div class="ion-text-left">
    {{row.source}}
  </div>
</ng-template>
<ng-template #accountTpl let-row let-rowIndex="rowIndex" let-column="column">
  <div class="ion-text-left account-info">
    {{row.tokenAccount.short}} <a target="_blank" [href]="row.url"> <ion-img src="assets/icon/link.svg"></ion-img> </a>
  </div>
</ng-template>
<ng-template #actionTpl let-row let-rowIndex="rowIndex" let-column="column">
  <ion-button class="ion-text-capitalize close-single">Close</ion-button>
</ng-template>

<ng-template #sourceTpl let-row let-rowIndex="rowIndex" let-column="column">
  <div class="source-type ion-text-left ion-text-capitalize">
    <ion-chip >{{row.source}}</ion-chip>
  </div>
</ng-template>