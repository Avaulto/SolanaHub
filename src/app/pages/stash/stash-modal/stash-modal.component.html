<div class="ion-padding">
  <div id="modal-intro">
    <div>
      <div class="icon-wrapper">
        <ion-img src="assets/images/clean-icon.svg" />
      </div>

      <div id="title">Stash summary</div>
      <div id="desc">You can clean up your stash by burning your stashs</div>
    </div>

    <ion-img (click)="closeModal()" id="close-modal" src="assets/images/close-icon.svg" />

  </div>
  <div id="burn-stash-modal">

    <div class="ion-margin-bottom">
      <alert type="danger" text="This operation is not reversible" />
    </div>
    <div id="stashs-list">
      @for (item of stashAssets; track $index) {
      <!-- <stash-modal-item [stash]="stash"/> -->
      <div class="stash-item">
        <div class="stash-profile">
          <ion-img [src]="item.imgUrl" #img (ionError)="img.src = 'assets/images/unknown.svg'" />
          <div>
            <ion-label>{{item.name}}</ion-label>
            <ion-text>{{item.symbol}}</ion-text>
          </div>
        </div>
        @if (item.balance > 0) {
        <div class="floor-price">
          {{item.balance | number:'1.2-2'}} {{item.symbol}}</div>
        }
      </div>
      }
    </div>

    <div id="burn-summary">
      <ion-label>Cleanup summary</ion-label>
      <div id="burn-calc">
        <div class="item">
          <div class="item-id">items selected</div>
          <div class="item-value">{{stashAssets.length}}</div>
        </div>
        <div class="item">
          <div class="item-id">get from cleaning up</div>
          @for (item of summary | keyvalue; track $index) {

          <div class="item-value">{{item.value}} {{item.key}}</div>
            <!-- add declimation mark between each itration, if not last -->
            @if ($index < (summary | keyvalue).length - 1) {
              <div class="item-value">, </div>
            }
          }
        </div>
        <div class="item">
          <div class="item-id">platform fee</div>
          <div class="item-value">{{platformFee}} SOL</div>
        </div>
      </div>
    </div>

    <div id="modal-controls">
      <!-- <ion-button (click)="closeModal()" fill="clear">cancel</ion-button> -->
      <ion-button (click)="submit(stashAssets)">{{actionTitle}}</ion-button>
    </div>
  </div>
</div>